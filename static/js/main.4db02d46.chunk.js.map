{"version":3,"sources":["components/App.module.css","reducers.js","constants.js","schemas.js","selectors.js","components/Item.js","containers/Item.js","components/List.js","api.js","actions.js","containers/List.js","components/Detail.js","containers/Detail.js","components/App.js","containers/App.js","index.js"],"names":["module","exports","app","list","detail","entities","handleActions","Object","defineProperty","state","_ref","payload","result","Set","concat","toConsumableArray","keys","forEach","key","objectSpread","topLevelCategories","_ref2","combineReducers","category","schema","Entity","nestedCategory","define","subCategories","getEntities","getTopLevelCategories","makeGetCategoryBySlug","slug","createSelector","topLevel","values","categories","find","c","Item","_ref$id","id","_ref$name","name","_ref$slug","_ref$subCategories","_ref$match","match","label","react_default","a","createElement","length","route","url","replace","react_router_dom","to","react_router","path","component","List","withRouter","connect","denormalize","makeGetCategoryByID","parentId","fetchCategories","items","useEffect","map","containers_Item","normalize","data","sleep","time","Promise","resolve","setTimeout","asyncToGenerator","regenerator_default","mark","_callee","ids","_args","arguments","wrap","_context","prev","next","undefined","abrupt","stop","this","apply","addEntities","createAction","setTopLevelCategories","mapDispatchToProps","dispatch","_normalize","api","sent","_x","parentCategory","Detail","JSON","stringify","App","className","style","store","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","es","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.4db02d46.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3q4F6\",\"list\":\"App_list__1Znq1\",\"detail\":\"App_detail__2xe5g\"};","import { combineReducers } from 'redux';\nimport { handleActions } from 'redux-actions';\nimport { ADD_ENTITIES, SET_TOP_LEVEL_CATEGORIES } from './constants';\n\nconst entities = handleActions(\n  {\n    [ADD_ENTITIES]: (state, { payload }) => {\n      const result = {};\n      const keys = new Set([...Object.keys(state), ...Object.keys(payload)]);\n      keys.forEach(key => {\n        result[key] = { ...state[key], ...payload[key] };\n      });\n      return result;\n    },\n  },\n  {},\n);\n\nconst topLevelCategories = handleActions(\n  {\n    [SET_TOP_LEVEL_CATEGORIES]: (state, { payload }) => payload,\n  },\n  [],\n);\n\nexport default combineReducers({\n  entities,\n  topLevelCategories,\n});\n","export const ADD_ENTITIES = 'ADD_ENTITIES';\nexport const SET_TOP_LEVEL_CATEGORIES = 'SET_TOP_LEVEL_CATEGORIES';\n","import { schema } from 'normalizr';\n\nexport const category = new schema.Entity('categories');\n\nexport const nestedCategory = new schema.Entity('categories');\nnestedCategory.define({\n  subCategories: [nestedCategory],\n});\n","import { createSelector } from 'reselect';\nimport { denormalize } from 'normalizr';\nimport { category } from './schemas';\n\nconst getEntities = state => state.entities;\nconst getTopLevelCategories = state => state.topLevelCategories;\n\nexport const makeGetCategoryByID = id =>\n  createSelector(\n    getEntities,\n    entities => denormalize(id, category, entities),\n  );\n\nexport const makeGetCategoryBySlug = slug =>\n  createSelector(\n    getEntities,\n    getTopLevelCategories,\n    (entities, topLevel) =>\n      slug\n        ? Object.values(entities.categories || {}).find(c => c.slug === slug)\n        : { subCategories: topLevel },\n  );\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { NavLink } from 'react-router-dom';\nimport List from '../containers/List';\n\nconst Item = ({\n  id = 0,\n  name = '...',\n  slug = '',\n  subCategories = [],\n  match = {},\n}) => {\n  const label = (\n    <span>\n      [{id}] {name}\n    </span>\n  );\n\n  if (!slug || subCategories.length === 0) {\n    return <li>{label}</li>;\n  }\n\n  const route = `${match.url}/${slug}`.replace(/\\/+/g, '/');\n  return (\n    <li>\n      <NavLink to={route}>{label}</NavLink>\n      <Route path={route} component={List} />\n    </li>\n  );\n};\n\nexport default Item;\n","import { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport { makeGetCategoryByID } from '../selectors';\nimport Item from '../components/Item';\n\nconst mapStateToProps = (state, { id }) => ({\n  ...makeGetCategoryByID(id)(state),\n});\n\nexport default withRouter(connect(mapStateToProps)(Item));\n","import React, { useEffect } from 'react';\nimport Item from '../containers/Item';\n\nconst List = ({ parentId, fetchCategories, items }) => {\n  useEffect(() => {\n    fetchCategories(parentId);\n  }, [parentId]);\n  return (\n    <ul>\n      {items.map(id => (\n        <Item key={id} id={id} />\n      ))}\n    </ul>\n  );\n};\n\nexport default List;\n","import { normalize, denormalize } from 'normalizr';\nimport { category, nestedCategory } from './schemas';\nimport data from './data.json';\n\nconst { result, entities } = normalize(data, [nestedCategory]);\n\nconst sleep = time => new Promise(resolve => setTimeout(resolve, time));\n\nexport const fetchCategories = async (parentId = '') => {\n  const ids = !parentId ? result : entities.categories[parentId].subCategories;\n  await sleep(300);\n  return denormalize(ids, [category], entities);\n};\n","import { normalize } from 'normalizr';\nimport { category } from './schemas';\nimport { createAction } from 'redux-actions';\nimport { ADD_ENTITIES, SET_TOP_LEVEL_CATEGORIES } from './constants';\nimport * as api from './api';\n\nexport const addEntities = createAction(ADD_ENTITIES);\nexport const setTopLevelCategories = createAction(SET_TOP_LEVEL_CATEGORIES);\n\nexport const fetchCategories = parentId => async dispatch => {\n  const categories = await api.fetchCategories(parentId);\n  const { result, entities } = normalize(categories, [category]);\n  dispatch(addEntities(entities));\n  if (!parentId) dispatch(setTopLevelCategories(result));\n};\n","import { connect } from 'react-redux';\nimport List from '../components/List';\nimport { makeGetCategoryBySlug } from '../selectors';\nimport { fetchCategories } from '../actions';\n\nconst mapStateToProps = (state, { match }) => {\n  const slug = match.url.replace(/^.*\\/(.*)$/, '$1');\n  const parentCategory = makeGetCategoryBySlug(slug)(state);\n  return {\n    parentId: parentCategory.id,\n    items: parentCategory.subCategories,\n  };\n};\n\nconst mapDispatchToProps = {\n  fetchCategories,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(List);\n","import React from 'react';\n\nconst Detail = ({ data }) => <pre>{JSON.stringify(data, null, 2)}</pre>;\n\nexport default Detail;\n","import { connect } from 'react-redux';\nimport Detail from '../components/Detail';\nimport { makeGetCategoryBySlug } from '../selectors';\n\nconst mapStateToProps = (state, { match }) => {\n  const slug = match.url.replace(/^.*\\/(.*)$/, '$1');\n  return {\n    data: makeGetCategoryBySlug(slug)(state),\n  };\n};\n\nexport default connect(mapStateToProps)(Detail);\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport List from '../containers/List';\nimport Detail from '../containers/Detail';\nimport style from './App.module.css';\n\nconst App = () => (\n  <div className={style.app}>\n    <div className={style.list}>\n      <Route component={List} />\n    </div>\n    <div className={style.detail}>\n      <Route path=\"*\" component={Detail} />\n    </div>\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\nimport reducers from '../reducers';\nimport App from '../components/App';\n\nconst store = createStore(reducers, applyMiddleware(thunk));\n\nexport default () => (\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}